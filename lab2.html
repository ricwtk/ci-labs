<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Lab 2: EC (GA) | CSC3034</title>
    <meta name="description" content="">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@3.x/css/materialdesignicons.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css">
    
    <link rel="preload" href="/ci-labs/assets/css/0.styles.4805b9ce.css" as="style"><link rel="preload" href="/ci-labs/assets/js/app.5a6eedcf.js" as="script"><link rel="preload" href="/ci-labs/assets/js/2.f123190f.js" as="script"><link rel="preload" href="/ci-labs/assets/js/14.efc50b54.js" as="script"><link rel="prefetch" href="/ci-labs/assets/js/10.50dc5fb0.js"><link rel="prefetch" href="/ci-labs/assets/js/11.863e2ba8.js"><link rel="prefetch" href="/ci-labs/assets/js/12.81161026.js"><link rel="prefetch" href="/ci-labs/assets/js/13.102b3e19.js"><link rel="prefetch" href="/ci-labs/assets/js/15.2824edf8.js"><link rel="prefetch" href="/ci-labs/assets/js/16.68ceabb0.js"><link rel="prefetch" href="/ci-labs/assets/js/17.98066496.js"><link rel="prefetch" href="/ci-labs/assets/js/18.fc2e5142.js"><link rel="prefetch" href="/ci-labs/assets/js/19.4ebcbc07.js"><link rel="prefetch" href="/ci-labs/assets/js/20.bff1f24a.js"><link rel="prefetch" href="/ci-labs/assets/js/3.74c77c24.js"><link rel="prefetch" href="/ci-labs/assets/js/4.eb099dc3.js"><link rel="prefetch" href="/ci-labs/assets/js/5.a1960905.js"><link rel="prefetch" href="/ci-labs/assets/js/6.6b928bc4.js"><link rel="prefetch" href="/ci-labs/assets/js/7.8290c013.js"><link rel="prefetch" href="/ci-labs/assets/js/8.9d9f317a.js"><link rel="prefetch" href="/ci-labs/assets/js/9.682d5eaf.js">
    <link rel="stylesheet" href="/ci-labs/assets/css/0.styles.4805b9ce.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/ci-labs/" class="home-link router-link-active"><!----> <span class="site-name">CSC3034</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://ricwtk.github.io/ai-labs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  AI
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/ci-labs/" class="nav-link">CI</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://ricwtk.github.io/ai-labs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  AI
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/ci-labs/" class="nav-link">CI</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/ci-labs/" class="sidebar-link">Home</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>2020 August</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/ci-labs/lab1.html" class="sidebar-link">Lab 1: Pre-lab</a></li><li><a href="/ci-labs/lab2.html" class="active sidebar-link">Lab 2: EC (GA)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ci-labs/lab2.html#binary-to-gray-code-conversion" class="sidebar-link">Binary-to-gray code conversion</a></li><li class="sidebar-sub-header"><a href="/ci-labs/lab2.html#genetic-algorithm" class="sidebar-link">Genetic algorithm</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ci-labs/lab2.html#feature-encoding" class="sidebar-link">Feature encoding</a></li><li class="sidebar-sub-header"><a href="/ci-labs/lab2.html#population-initialisation" class="sidebar-link">Population initialisation</a></li><li class="sidebar-sub-header"><a href="/ci-labs/lab2.html#fitness-calculation" class="sidebar-link">Fitness calculation</a></li><li class="sidebar-sub-header"><a href="/ci-labs/lab2.html#selection-as-parents" class="sidebar-link">Selection as parents</a></li><li class="sidebar-sub-header"><a href="/ci-labs/lab2.html#crossover" class="sidebar-link">Crossover</a></li><li class="sidebar-sub-header"><a href="/ci-labs/lab2.html#mutation" class="sidebar-link">Mutation</a></li><li class="sidebar-sub-header"><a href="/ci-labs/lab2.html#repeat-until-termination" class="sidebar-link">Repeat until termination</a></li><li class="sidebar-sub-header"><a href="/ci-labs/lab2.html#combining-all-functions" class="sidebar-link">Combining all functions</a></li></ul></li></ul></li><li><a href="/ci-labs/lab3.html" class="sidebar-link">Lab 3: EC (PSO)</a></li><li><a href="/ci-labs/lab4.html" class="sidebar-link">Lab 4: EC (ACO)</a></li><li><a href="/ci-labs/lab5.html" class="sidebar-link">Lab 5: ANN (Supervised learning)</a></li><li><a href="/ci-labs/lab6.html" class="sidebar-link">Lab 6: ANN (Hyperplane)</a></li><li><a href="/ci-labs/lab7.html" class="sidebar-link">Lab 7: Fuzzy Systems</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Archive</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="lab-2-ec-ga"><a href="#lab-2-ec-ga" aria-hidden="true" class="header-anchor">#</a> Lab 2: EC (GA)</h1> <h2 id="binary-to-gray-code-conversion"><a href="#binary-to-gray-code-conversion" aria-hidden="true" class="header-anchor">#</a> Binary-to-gray code conversion</h2> <p>Binary string is often used in the implementation of genetic algorithm. However, the downside of using a binary code is that the Hamming distance between two adjacent values is not consistent. This situation is solved by using a Gray code in place of a binary code.</p> <ol><li><p><code>numpy</code> provides the function of <a href="https://het.as.utexas.edu/HET/Software/Numpy/reference/generated/numpy.binary_repr.html" target="_blank" rel="noopener noreferrer"><code>binary_repr</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to convert a decimal value to its corresponding binary code.</p></li> <li><p>Create a function to take the input of a binary code and return the correponding Gray code of the binary code.</p></li> <li><p>Create a function to calculate the Hamming distance between two binary strings (two binary codes or two Gray codes).</p></li> <li><p>Consider a sequence of decimal values of <code>[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</code>. Convert the sequence to a series of binary codes. Identify and plot (<a href="https://matplotlib.org/3.1.1/gallery/lines_bars_and_markers/simple_plot.html#sphx-glr-gallery-lines-bars-and-markers-simple-plot-py" target="_blank" rel="noopener noreferrer">example of a line plot<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>) the Hamming distances between the adjacent values.</p></li> <li><p>Repeat the previous step with Gray codes instead of binary codes.</p></li></ol> <h2 id="genetic-algorithm"><a href="#genetic-algorithm" aria-hidden="true" class="header-anchor">#</a> Genetic algorithm</h2> <p>Consider the following problem:</p> <blockquote><p>You are given a sheet of paper with width <code>w</code> and height <code>h</code>. Your task is to cut the paper into squares of equal size. The aim of the task is to have as many squares as possible, and to have the area of each square as large as possible.</p></blockquote> <ol><li><p>An optimisation problem can always be phrased in the form of</p> <blockquote><p>to optimise ... such that it maximises/minimises ...</p></blockquote> <p>In this problem, what is the parameter to be optimised and what are the parameters to be maximised or minimised?</p></li> <li><p>Let <code>x</code> denotes the length of the sides of a square. Design a fitness function such that higher fitness corresponds to larger number of squares and large area. If the number of squares (that can be cut out) is zero, or the area of the square is zero, the fitness will be zero.</p></li></ol> <div data-app="true" id="app" class="v-application v-application--is-ltr theme--light"><div class="v-application--wrap"><div class="v-timeline my-2 v-timeline--reverse theme--light"><div class="v-timeline-item v-timeline-item--before theme--light"><div class="v-timeline-item__body"></div><div class="v-timeline-item__divider"><div class="v-timeline-item__dot"><div class="v-timeline-item__inner-dot primary"></div></div></div><div class="v-timeline-item__opposite"><div class="flex">feature encoding</div></div></div> <div class="v-timeline-item v-timeline-item--before theme--light"><div class="v-timeline-item__body"></div><div class="v-timeline-item__divider"><div class="v-timeline-item__dot"><div class="v-timeline-item__inner-dot primary"></div></div></div><div class="v-timeline-item__opposite"><div class="flex">population initialisation</div></div></div> <div class="v-timeline-item v-timeline-item--before theme--light"><div class="v-timeline-item__body"></div><div class="v-timeline-item__divider"><div class="v-timeline-item__dot"><div class="v-timeline-item__inner-dot primary"></div></div></div><div class="v-timeline-item__opposite"><div class="flex">selection as parents</div></div></div> <div class="v-timeline-item v-timeline-item--before theme--light"><div class="v-timeline-item__body"></div><div class="v-timeline-item__divider"><div class="v-timeline-item__dot"><div class="v-timeline-item__inner-dot primary"></div></div></div><div class="v-timeline-item__opposite"><div class="flex">crossover</div></div></div> <div class="v-timeline-item v-timeline-item--before theme--light"><div class="v-timeline-item__body"></div><div class="v-timeline-item__divider"><div class="v-timeline-item__dot"><div class="v-timeline-item__inner-dot primary"></div></div></div><div class="v-timeline-item__opposite"><div class="flex">mutation</div></div></div> <div class="v-timeline-item v-timeline-item--before theme--light"><div class="v-timeline-item__body"></div><div class="v-timeline-item__divider"><div class="v-timeline-item__dot"><div class="v-timeline-item__inner-dot primary"></div></div></div><div class="v-timeline-item__opposite"><div class="flex">offspring (next generation population)</div></div></div> <div class="v-timeline-item v-timeline-item--before theme--light"><div class="v-timeline-item__body"></div><div class="v-timeline-item__divider"><div class="v-timeline-item__dot"><div class="v-timeline-item__inner-dot primary"></div></div></div><div class="v-timeline-item__opposite"><div class="flex">repeat from fitness calculation until termination</div></div></div></div></div></div> <h3 id="feature-encoding"><a href="#feature-encoding" aria-hidden="true" class="header-anchor">#</a> Feature encoding</h3> <ol><li><p>In this problem as we only have one feature, i.e. the side length of the square, each chromosome consists of the value of the side length of the square. We will encode the chromosome in the form of Gray code.</p></li> <li><p>Create two functions <code>value2gray</code> and <code>gray2value</code> to convert a decimal value to its Gray code and vice versa.</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">value2gray</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">:</span>
  <span class="token comment"># this function converts a decimal value to its gray code representation</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token keyword">return</span> gray

<span class="token keyword">def</span> <span class="token function">gray2value</span><span class="token punctuation">(</span>gray<span class="token punctuation">)</span><span class="token punctuation">:</span>
  <span class="token comment"># this function converts a gray code representation to its decimal value</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token keyword">return</span> value
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li> <li><p>Add the following code snippet to the end of the code to test your functions.</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&quot;__main__&quot;</span><span class="token punctuation">:</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>value2gray<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>gray2value<span class="token punctuation">(</span><span class="token string">&quot;1001&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>After running the file as a script, you should see the following output.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>1111
14
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ol> <h3 id="population-initialisation"><a href="#population-initialisation" aria-hidden="true" class="header-anchor">#</a> Population initialisation</h3> <ol><li><p>A population is randomly generated according to the defined population size.</p></li> <li><p>Create a function to generate randomly a population of size <code>pop_size</code> with each value lies between the range of <code>pop_min</code> to <code>pop_max</code>.</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">generatePopulation</span><span class="token punctuation">(</span>pop_size<span class="token punctuation">,</span> pop_min<span class="token punctuation">,</span> pop_max<span class="token punctuation">)</span><span class="token punctuation">:</span>
  <span class="token comment"># this function generate the first generation randomly based on the population size and the range of the value of each chromosome</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token keyword">return</span> population
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>This function and all the functions created after this should be placed before the <code>if __name__ == &quot;__main__&quot;:</code> code block.</p></li> <li><p>[Optional testing] You can test the function by changing the <code>__main__</code> code block to</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&quot;__main__&quot;</span><span class="token punctuation">:</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>generatePopulation<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>The printed output should be a series of 8 chromosomes displayed as decimal values.</p></li></ol> <h3 id="fitness-calculation"><a href="#fitness-calculation" aria-hidden="true" class="header-anchor">#</a> Fitness calculation</h3> <ol><li><p>The fitness function was designed at the beginning of <a href="#genetic-algorithm">this section</a>. Define a function that takes the input of a chromosome (as decimal value) and returns the fitness of the chromosome.</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">calculateFitness</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">:</span>
  <span class="token comment"># this function calculates the fitness of a chromosome from the decimal value of the chromosome</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token keyword">return</span> fitness
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>[Optional] Test the function with</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&quot;__main__&quot;</span><span class="token punctuation">:</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>calculateFitness<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>The printed output should be the fitness of a chromosome of value 5, which would be a decimal value larger than zero.</p></li></ol> <h3 id="selection-as-parents"><a href="#selection-as-parents" aria-hidden="true" class="header-anchor">#</a> Selection as parents</h3> <ol><li><p>From the list of the chromosomes, we will select the chromosome pairs as parents. As we will be using one-point crossover, each pair of parents will produce exactly two offsprings. Therefore for population size of <code>pop_size</code>, we need <code>pop_size/2</code> pairs of parents.</p></li> <li><p>Define a function that takes the inputs of the current population and the total number of chromosomes in current population, and returns the chromosome pairs which will act as parents. The selection process is performed with the roulette wheel selection. The same chromosome can be selected more than once.</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">selectParents</span><span class="token punctuation">(</span>chromosomes<span class="token punctuation">,</span> pop_size<span class="token punctuation">)</span><span class="token punctuation">:</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token keyword">return</span> parent_pairs
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>[Optional] Test the function with</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&quot;__main__&quot;</span><span class="token punctuation">:</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>selectParents<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>The printed output should be 3 parent pairs, for example,</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[[13, 8], [8, 14], [13, 7]]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ol> <h3 id="crossover"><a href="#crossover" aria-hidden="true" class="header-anchor">#</a> Crossover</h3> <ol><li><p>Define a function that takes a parent pair and returns a pair of offspring after performing one-point crossover.</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">crossover</span><span class="token punctuation">(</span>parents<span class="token punctuation">)</span><span class="token punctuation">:</span>
  <span class="token comment"># this function takes a parent pair and perform one-point crossover to produce a pair of offspring</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token keyword">return</span> offsprings
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>[Optional] Test the function with</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&quot;__main__&quot;</span><span class="token punctuation">:</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>crossover<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>The printed output should be a pair of offsprings, for example,</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[10, 14]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><em><code>13</code> is <code>1011</code> and <code>9</code> is <code>1101</code> in Gray code, the offsprings <code>10</code> is <code>1111</code> and <code>14</code> is <code>1001</code> in Gray code.</em></p></li></ol> <h3 id="mutation"><a href="#mutation" aria-hidden="true" class="header-anchor">#</a> Mutation</h3> <ol><li><p>Each gene in all chromosomes has the same mutation probability <code>p_mutation</code>.</p></li> <li><p>Define a function that takes a chromosome and the mutation probability <code>p_mutation</code> as the inputs, and returns the mutated chromosome.</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">mutate</span><span class="token punctuation">(</span>chromosome<span class="token punctuation">,</span> p_mutation<span class="token punctuation">)</span><span class="token punctuation">:</span>
  <span class="token comment"># this function mutates each gene of a chromosome based on the mutation probability</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token keyword">return</span> mutated
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>[Optional] Test the function with</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&quot;__main__&quot;</span><span class="token punctuation">:</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>mutate<span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>The printed output should be the mutated or unmutated chromosome, for example, <code>14</code>.</p> <p><em><code>15</code> is <code>1000</code> and <code>14</code> is <code>1001</code> in Gray code. In the example output, the last bit is mutated.</em></p></li></ol> <h3 id="repeat-until-termination"><a href="#repeat-until-termination" aria-hidden="true" class="header-anchor">#</a> Repeat until termination</h3> <ol><li><p>The common termination criteria are the maximum number of iterations and the distance among the fitnesses of the chromosomes of the latest population.</p></li> <li><p>Define a function that calculates one metric to measure the distance among the fitnesses of the chromosomes, i.e. how far the fitnesses of all the chromosomes are from each other.</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">findOverallDistance</span><span class="token punctuation">(</span>chromosomes<span class="token punctuation">)</span><span class="token punctuation">:</span>
  <span class="token comment"># this function takes the input of the current population and returns the overall distance among fitnesses of all chromosomes</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token keyword">return</span> overall_distance
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>[Optional] Test the function with</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&quot;__main__&quot;</span><span class="token punctuation">:</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>findOverallDistance<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>The printed output should be a decimal value that represents the overall distance of fitnesses.</p></li></ol> <h3 id="combining-all-functions"><a href="#combining-all-functions" aria-hidden="true" class="header-anchor">#</a> Combining all functions</h3> <ol><li><p>The functions we have created can be combined with the following code snippet to execute the genetic algorithm to solve the problem defined at the beginning of <a href="#genetic-algorithm">this section</a>. Consider the width and the height of the sheet of paper to be <code>20cm</code> and <code>15cm</code>.</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&quot;__main__&quot;</span><span class="token punctuation">:</span>
  <span class="token comment"># main function</span>
  <span class="token comment">## parameter definition</span>
  pop_size <span class="token operator">=</span> <span class="token number">10</span>
  pop_min <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">#1cm</span>
  pop_max <span class="token operator">=</span> <span class="token number">10</span> <span class="token comment">#10cm</span>
  curr_iter <span class="token operator">=</span> <span class="token number">0</span>
  max_iter <span class="token operator">=</span> <span class="token number">100</span>
  min_overalldistance <span class="token operator">=</span> <span class="token number">0.5</span>
  p_mutation <span class="token operator">=</span> <span class="token number">0.05</span>
  <span class="token comment">## initialise population</span>
  population <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  population<span class="token punctuation">.</span>append<span class="token punctuation">(</span>generatePopulation<span class="token punctuation">(</span>pop_size<span class="token punctuation">,</span> pop_min<span class="token punctuation">,</span> pop_max<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>curr_iter <span class="token operator">&lt;</span> max_iter <span class="token keyword">and</span> findOverallDistance<span class="token punctuation">(</span>population<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> min_overalldistance<span class="token punctuation">)</span><span class="token punctuation">:</span>
    curr_iter <span class="token operator">+=</span> <span class="token number">1</span>
    <span class="token comment">## select parent pairs</span>
    parents <span class="token operator">=</span> selectParents<span class="token punctuation">(</span>population<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>population<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment">## perform crossover</span>
    offsprings <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> p <span class="token keyword">in</span> parents<span class="token punctuation">:</span>
      new_offsprings <span class="token operator">=</span> crossover<span class="token punctuation">(</span>p<span class="token punctuation">)</span>
      <span class="token keyword">for</span> o <span class="token keyword">in</span> new_offsprings<span class="token punctuation">:</span>
        offsprings<span class="token punctuation">.</span>append<span class="token punctuation">(</span>o<span class="token punctuation">)</span>
    <span class="token comment">## perform mutation</span>
    mutated <span class="token operator">=</span> <span class="token punctuation">[</span>mutate<span class="token punctuation">(</span>offspring<span class="token punctuation">,</span> p_mutation<span class="token punctuation">)</span> <span class="token keyword">for</span> offspring <span class="token keyword">in</span> offsprings<span class="token punctuation">]</span>
    <span class="token comment">## update current population</span>
    population<span class="token punctuation">.</span>append<span class="token punctuation">(</span>mutated<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div></li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">9/1/2020, 1:07:57 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/ci-labs/lab1.html" class="prev">
          Lab 1: Pre-lab
        </a></span> <span class="next"><a href="/ci-labs/lab3.html">
          Lab 3: EC (PSO)
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/ci-labs/assets/js/app.5a6eedcf.js" defer></script><script src="/ci-labs/assets/js/2.f123190f.js" defer></script><script src="/ci-labs/assets/js/14.efc50b54.js" defer></script>
  </body>
</html>
